(()=>{"use strict";
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class e{static _contructor(){if(this._isInitialized)return;e._isChromium=navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/"),e._isFirefox=navigator.userAgent.includes("Firefox/"),e._isThunderbird=navigator.userAgent.includes("Thunderbird/"),e._isOpera=navigator.userAgent.includes("OPR/"),e._isEdge=navigator.userAgent.includes("Edg/"),e._isOldEdge=navigator.userAgent.includes("Edge/"),e._isSafari=(navigator.userAgent.includes("Safari/")||navigator.userAgent.includes("AppleWebKit"))&&!e._isChromium&&!e._isEdge&&!e._isOpera,e._isYaBrowser=navigator.userAgent.includes("YaBrowser/"),e._isChrome=e._isChromium&&!e._isOpera&&!e._isEdge&&!e._isOldEdge&&!e._isYaBrowser;const t=navigator.userAgent.match(/Chrome\/(\d+)/);t&&(e._isUnsupportedChrome=parseInt(t[1])<67&&!navigator.userAgent.includes("Edge/"));const n=navigator.userAgent.match(/Firefox\/(\d+)/);n&&(e._isUnsupportedFirefox=parseInt(n[1])<60),this._isInitialized=!0}static getOS(){return navigator.userAgent.includes("Macintosh")?"Mac":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("CrOS")?"CrOS":navigator.userAgent.includes("Linux")?"Linux":"Other"}static isChromium(){return e._isChromium}static isChrome(){return e._isChrome}static isThunderbird(){return e._isThunderbird}static isFirefox(){return e._isFirefox}static isOpera(){return e._isOpera}static isEdge(){return e._isEdge}static isSafari(){return e._isSafari}static isYaBrowser(){return e._isYaBrowser}static isUnsupportedChrome(){return e._isUnsupportedChrome}static isUnsupportedFirefox(){return e._isUnsupportedFirefox}static isUnsupportedBrowser(){return e.isUnsupportedChrome()||e.isUnsupportedFirefox()}static getBrowserName(){return e.isChrome()?"Chrome":e.isFirefox()?"Firefox":e.isOpera()?"Opera":e.isEdge()?"Edge":e.isSafari()?"Safari":e.isYaBrowser()?"Yandex":"Unknown Browser"}static getUserAgentIdentifier(){let e="webextension";return this.isChrome()?e+="-chrome":this.isFirefox()?e+="-firefox":this.isOpera()?e+="-opera":this.isEdge()?e+="-edge":this.isYaBrowser()?e+="-chrome":this.isSafari()?e+="-safari":e+="-unknown",e+"-ng"}static isTouchDevice(){if(!("ontouchstart"in window))return!1;const e=navigator.userAgent.includes("Android");return this.isIOS()||e}static isIOS(){const e=navigator.userAgent.includes("iPhone OS"),t=navigator.userAgent.includes("Macintosh")&&Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);return e||t}static isIOSTouchDevice(){return"ontouchstart"in window&&this.isIOS()}}e._isChromium=!1,e._isChrome=!1,e._isFirefox=!1,e._isThunderbird=!1,e._isOpera=!1,e._isOldEdge=!1,e._isEdge=!1,e._isSafari=!1,e._isYaBrowser=!1,e._isUnsupportedChrome=!1,e._isUnsupportedFirefox=!1,e._isInitialized=!1,e._contructor();const t=class{static init(e){this._instance=e}static isProductionEnvironment(){return this._instance.isProductionEnvironment()}static isRuntimeConnected(){return this._instance.isRuntimeConnected()}static getVersion(){return this._instance.getVersion()}static getTrackingId(){return this._instance.getTrackingId()}static shouldTrack(){return this._instance.shouldTrack()}static getType(){return this._instance.getType()}static getURL(e){return this._instance.getURL(e)}static getUILanguageCode(){return this._instance.getUILanguageCode()}static openWindow(e){return this._instance.openWindow(e)}static loadContentScripts(e,t){return this._instance.loadContentScripts(e,t)}static initializeLTAssistant(e,t={}){return this._instance.initializeLTAssistant(e,t)}static getPreferredLanguages(){return this._instance.getPreferredLanguages()}static startDictionarySync(){return this._instance.startDictionarySync()}static addWordToDictionary(e){return this._instance.addWordToDictionary(e)}static addWordsToDictionary(e){return this._instance.addWordsToDictionary(e)}static removeWordFromDictionary(e){return this._instance.removeWordFromDictionary(e)}static clearDictionary(){return this._instance.clearDictionary()}static updateDictionary(){return this._instance.updateDictionary()}static loadSynonyms(e,t,n){return this._instance.loadSynonyms(e,t,n)}static loadPhrases(e,t,n,s){return this._instance.loadPhrases(e,t,n,s)}static reportPhrase(e,t){return this._instance.reportPhrase(e,t)}static trackEvent(e,t){return this._instance.trackEvent(e,t)}static trackTextLength(e){return this._instance.trackTextLength(e)}static pageLoaded(e,t,n,s,i){return this._instance.pageLoaded(e,t,n,s,i)}static ltAssistantStatusChanged(e,t){return"number"==typeof e?this._instance.ltAssistantStatusChanged(e,t):this._instance.ltAssistantStatusChanged(e)}static check(e,t,n,s,i,o){return this._instance.check(e,t,n,s,i,o)}static isOptionsPageSupported(){return this._instance.isOptionsPageSupported()}static openOptionsPage(e,t){return this._instance.openOptionsPage(e,t)}static isFeedbackFormSupported(){return this._instance.isFeedbackFormSupported()}static openFeedbackForm(e,t,n){return this._instance.openFeedbackForm(e,t,n)}static openPremiumPage(e,t=0,n=0,s=0,i="",o){return this._instance.openPremiumPage(e,t,n,s,i,o)}};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class n{}n.eventNames={localeChanged:"lt-i18nManager.localeChanged"};const s=class{static init(e){this._instance=e}static addEventListener(e,t){this._instance.addEventListener(e,t)}static setLocale(e){this._instance.setLocale(e)}static getMessage(e,t){return this._instance.getMessage(e,t)}};
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
const i={EXTENSION_HEALTH_RECHECK_INTERVAL:3e3,UI_MODE_RECHECK_INTERVAL:6e4,ACCOUNT_STATUS_RECHECK_INTERVAL:36e5,EXTERNAL_CONFIG_RELOAD_INTERVAL:144e5,PING_INTERVAL:864e5,SYNC_USER_DATA_INTERVAL:864e5,IFRAME_INITILIZATION_RECHECK_INTERVAL:1500,DICTIONARY_SYNC_INTERVAL:72e5,RENDER_INTERVAL:300,TOOLBAR_DECREASE_SIZE_INTERVAL:900,CHECK_REQUEST_TIMEOUT:5e4,CHECK_THROTTLING_LIMIT:30,INSTALL_URL:"https://languagetool.org/webextension/welcome",UNINSTALL_URL:"https://languagetool.org/webextension/uninstall",USER_DATA_URL:"https://languagetool.org/webextension/user",BASE_SERVER_URL:"https://api.languagetool.org",get MAIN_SERVER_URL(){return`${this.BASE_SERVER_URL}/v2`},MAIN_FALLBACK_SERVER_URL:"https://api-fallback.languagetool.org/v2",PREMIUM_SERVER_URL:"https://api.languagetoolplus.com/v2",PREMIUM_FALLBACK_SERVER_URL:"https://languagetoolplus.com/api/v2",LOCAL_SERVER_URL:"http://localhost:8081/v2",FEEDBACK_SERVER_URL:"https://languagetool.org/send-feedback/",EXTERNAL_CONFIG_URL:"https://languagetool.org/webextension_config.json",CLIENT_LOGIN_URL:"https://languagetool.org/client-login",PING_URL:"https://languagetool.org/ping",WEBAPI_URL:"https://languagetool.org/webapi",SWITCH_TO_FALLBACK_SERVER_ERRORS:[502,503,504],MAIN_SERVER_RECHECK_INTERVAL:18e4,MIN_TEXT_LENGTH:4,SHORT_TEXT_MAX_LENGTH:50,MAX_TEXT_LENGTH:1e4,TEXT_LEVEL_MAX_LENGTH_PER_REQUEST:2e4,MAX_TEXT_LENGTH_PERFORMANCE_DEGRADATION:4e4,MAX_TEXT_LENGTH_PREMIUM:1e5,MAX_TEXT_LENGTH_CUSTOM_SERVER:Number.MAX_SAFE_INTEGER,PARAGRAPH_LEVEL_CHUNK_LENGTH:5e3,CHECK_DELAY:1400,CHECK_MAX_DELAY:3500,STOPPED_TYPING_TIMEOUT:2250,COLORS:{GRAMMAR:{UNDERLINE:"#f2b24c",BACKGROUND:"rgba(242,179,77,0.3)",EMPHASIZE:"rgba(241,179,76,0.1)"},STYLE:{UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.1)",TITLE:"#5C4CFF"},LONG_SENTENCE:{UNDERLINE:"#D2CBFF",BACKGROUND:"rgba(210,203,255,0.2)",EMPHASIZE:"rgba(210,203,255,0.1)"},HIDDEN_MATCH:{UNDERLINE:"#F37B23",BACKGROUND:"rgba(253,177,55,0.2)",EMPHASIZE:"rgba(253,177,55,0.1)"},IGNORED_RANGE:{UNDERLINE:"#00bbe6",BACKGROUND:"rgb(92, 222, 251, 0.2)",EMPHASIZE:"rgb(154, 232, 250, 0.1)"},SPELLING:{UNDERLINE:"#EB5757",BACKGROUND:"rgba(235,88,88,0.2)",EMPHASIZE:"rgba(239,88,88,0.1)"},SYNONYMS:{UNDERLINE:"#0042d7"},NEW_SENTENCE:{BACKGROUND:"rgba(30, 225, 151, 0.2)"}},MAX_FIXES_COUNT:5,MAX_EXCEPTION_COUNT:6,MAX_USAGE_COUNT_ONBOARDING:5,SUPPORTED_SYNONYM_LANGUAGES:["de","de-CH","ru","sv","pt","el","en","eo","it","fr","es","uk","sk","sl","pl","da","ro","nl","ca"],COUNTRY_COUPON_MAPPING:{UKRAINE:{countries:["UA","BY"],percent:50},"ITALY-DISCOUNT":{countries:["IT"],percent:20},"SPAIN-DISCOUNT":{countries:["ES"],percent:20},SOUTH_EUROPE:{countries:["RO","AL","GR","ME","EE","LT","LV","BG","CY","MT","SK","SI","RS","HR","XK","HU","MD","TR","PT"],percent:20},AFRICA:{countries:["NG","ET","EG","CD","CG","TZ","KE","UG","DZ","SD","MA","AO","MZ","TN","CI","DJ","SZ","MU","GQ","GA","BW","SO","CD","ER","MG"],percent:50},ASIA:{countries:["ID","PK","BD","VN","MM","PH","UZ","MY","NP","KZ","KH","UZ","TH","YE","SY","JO"],percent:50},LATIN_AMERICA:{countries:["PE","VE","EC","SV","DO","BO","SR","AR","HN","BZ","CR","PA","GT","NI","GY","UY","HT","JM","TT","CU"],percent:50},BRAZIL:{countries:["BR"],percent:50}},COUPON_INTERVAL:5184e6,PACKAGE:{BASIC:"Basic",PREMIUM:"Premium"},PICKY_RULES_THAT_ARE_CONSIDERED_ANNOYING:["EN_QUOTES","PASSIVE_VOICE","DASH_RULE","SENTENCE_FRAGMENT","TOO_LONG_SENTENCE","FALSCHE_VERWENDUNG_DES_BINDESTRICHS","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2","PUNCTUATION_PARAGRAPH_END","FINAL_STOPS","FINAL_PUNCTUATION","SMART_QUOTES","DASH_SPACE_RULES","HIPHEN_SPACE_RULES","BRAK_KROPKI","DYWIZ","CUDZYSLOW_DRUKARSKI","EINDE_ZIN_ONVERWACHT","BACKTICK","GEDACHTESTREEPJE","OPTIONAL_HYPHEN"],ERRORS_THAT_CAN_BE_CORRECTED_ALL_AT_ONCE:[{ruleId:"FALSCHES_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[„“]/,message:"Alle <lt-em>“</lt-em>…<lt-em>”</lt-em> zu <lt-em>„</lt-em>…<lt-em>“</lt-em> ändern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[„“]/,message:"Alle <lt-em>&quot;</lt-em>…<lt-em>&quot;</lt-em> zu <lt-em>„</lt-em>…<lt-em>“</lt-em> ändern"},{match:/(^»)|(«$)/,message:"Alle <lt-em>&quot;</lt-em>…<lt-em>&quot;</lt-em> zu <lt-em>»</lt-em>…<lt-em>«</lt-em> ändern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH",suggestions:[{match:/[„“]/,message:"Alle <lt-em>&quot;</lt-em>…<lt-em>&quot;</lt-em> zu <lt-em>„</lt-em>…<lt-em>“</lt-em> ändern"},{match:/(^«)|(»$)/,message:"Alle <lt-em>&quot;</lt-em>…<lt-em>&quot;</lt-em> zu <lt-em>«</lt-em>…<lt-em>»</lt-em> ändern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2",suggestions:[{match:/[‚‘]/,message:"Alle <lt-em>'</lt-em>…<lt-em>'</lt-em> zu <lt-em>‚</lt-em>…<lt-em>‘</lt-em> ändern"},{match:/[„“]/,message:"Alle <lt-em>'</lt-em>…<lt-em>'</lt-em> zu <lt-em>„</lt-em>…<lt-em>“</lt-em> ändern"}]},{ruleId:"TYPOGRAFISCHE_APOSTROPHE",suggestions:[{match:/’/,message:"Alle Apostrophe zu <lt-em>’</lt-em> ändern"}]},{ruleId:"EN_QUOTES",suggestions:[{match:/[“”]/,message:"Change all <lt-em>&quot;</lt-em>…<lt-em>&quot;</lt-em> to <lt-em>“</lt-em>…<lt-em>”</lt-em>"}]},{ruleId:"WRONG_APOSTROPHE",suggestions:[{match:/'/,message:"Use <lt-em>'</lt-em> for all bad apostrophes"},{match:/’/,message:"Use <lt-em>’</lt-em> for all bad apostrophes"}]},{ruleId:"PARAGRAF_LEERZEICHEN",suggestions:[{match:/§\u00A0/,message:"Alle Leerzeichen nach <lt-em>§</lt-em> ändern"}]}]};let o,r,a,c,d,l;!function(){let e;try{e=new RegExp("\\p{L}","u")}catch(t){e=/[a-zäöüß]/i}o=function(t){return e.test(t)}}(),function(){const e=new RegExp("^[\b\t          ‏　]$"),t=new RegExp("[\b\t          ‏　]","g");r=function(t){return e.test(t)},a=function(e){return e.replace(t," ")}}(),function(){const e="​‌‍­⁠‪‫‬‭",t=new RegExp("^["+e+"]$"),n=new RegExp("["+e+"]"),s=new RegExp("["+e+"]","g");c=function(e){return t.test(e)},d=function(e){const t=e.match(n);return t?t.index:-1},l=function(e){return e.replace(s,"")}}();!function(){const e=/^[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ]+[A-ZÈÉÊÁÀÂÓÒÔÚÙÛÍÌÎÄÜÖ\-!?#@=%().:;<>'’´`"”“*+,\s]+[A-ZÈÉÊÁÀÂÓÒÔÍÌÎÄÜÖ]$/}();let g,u;function h(e){return null===e||"object"!=typeof e?e:e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e):Array.isArray(e)?Array.from(e):Object.assign({},e)}function m(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);const t=Array.isArray(e)?[]:{};for(const n in e)t[n]=m(e[n]);return t}function _(){if("about:blank"===location.href||"about:srcdoc"===location.href)try{return(window.opener||window.parent).location.href}catch(e){}return location.href}function E(e,t=e){if(e.startsWith("about:blank"))return"blank";if(e.startsWith("about:srcdoc"))return"srcdoc";if(e.startsWith("file:"))return"file";e&&!/^([a-z\-]+:\/\/)/i.test(e)&&(e="http://"+e);try{return new URL(e).hostname}catch(e){return t}}!function(){let e,t;const n=/(?:\S+\s+){0,4}\S+$/,s=/^\S+(?:\s+\S+){0,4}/;try{e=new RegExp("^\\s*(-?\\p{L}+)*-?\\s*$","u"),t=new RegExp("^\\s*\\p{L}+(-\\p{L}+)*\\s*$","u")}catch(n){e=/^\s*(-?[a-zäöüß]+)*-?\s*$/i,t=/^\s*[a-zäöüß]+(-[a-zäöüß]+)*\s*$/i}g=(n,s,i=s)=>{const r=n.substring(s,i);if(!e.test(r))return null;let a=0===r.length||o(r[0]),c="-"===r[0],d=s;if(a||c)for(;d>0;){const e=n[d-1],t=o(e),s="-"===e;if(!t&&!s)break;if(s&&c)return null;d--,a=t,c=s}a=o(r[r.length-1]),c=r.endsWith("-");let l=i;if(a||c)for(;l<n.length;){const e=n[l],t=o(e),s="-"===e;if(!t&&!s)break;if(s&&c)return null;l++,a=t,c=s}const g=r.match(/\s+$/);g&&(l-=g[0].length);const u=n.substring(d,l);return t.test(u)?{start:d,end:l}:null},u=(e,t,i)=>{const o=g(e,t,i);if(!o)return null;const r=n.exec(e.substring(0,o.start).trim()),a=r?r[0]:"",c=s.exec(e.substring(o.end).trim()),d=c?c[0]:"";return{word:e.substring(o.start,o.end),position:o,beforeText:a,afterText:d}}}();!function(){const e=/^\w+\.$/}();!function(){const e=/[\u0300-\u036f]/g,t=/\u0142/g,n=/\u00F8/g}();
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class p{constructor(){this._eventHandlers=new Map}subscribe(e,t){this._eventHandlers.has(e)||this._eventHandlers.set(e,[]),this._eventHandlers.get(e).push(t)}fire(e,t){const n=this._eventHandlers.get(e);n&&n.forEach((e=>{try{e(t)}catch(e){console.error(e)}}))}destroy(){this._eventHandlers.clear()}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class S{static get LANGUAGES(){return this._languages||(this._languages=[{code:"ar",name:s.getMessage("ar")},{code:"ast-es",name:s.getMessage("ast")},{code:"be-by",name:s.getMessage("be")},{code:"br-fr",name:s.getMessage("br")},{code:"ca-es",name:s.getMessage("ca")},{code:"ca-es-valencia",name:s.getMessage("ca_ES_valencia")},{code:"da-dk",name:s.getMessage("da_DK")},{code:"de-at",name:s.getMessage("de_AT")},{code:"de-ch",name:s.getMessage("de_CH")},{code:"de-de",name:s.getMessage("de_DE")},{code:"el-gr",name:s.getMessage("el")},{code:"en-au",name:s.getMessage("en_AU")},{code:"en-ca",name:s.getMessage("en_CA")},{code:"en-gb",name:s.getMessage("en_GB")},{code:"en-nz",name:s.getMessage("en_NZ")},{code:"en-us",name:s.getMessage("en_US")},{code:"en-za",name:s.getMessage("en_ZA")},{code:"eo",name:s.getMessage("eo")},{code:"es",name:s.getMessage("es")},{code:"fa",name:s.getMessage("fa")},{code:"ga-ie",name:s.getMessage("ga")},{code:"fr",name:s.getMessage("fr")},{code:"gl-es",name:s.getMessage("gl")},{code:"it",name:s.getMessage("it")},{code:"ja-jp",name:s.getMessage("ja")},{code:"km-kh",name:s.getMessage("km")},{code:"nl",name:s.getMessage("nl")},{code:"no",name:s.getMessage("no")},{code:"pl-pl",name:s.getMessage("pl")},{code:"pt-ao",name:s.getMessage("pt_AO")},{code:"pt-br",name:s.getMessage("pt_BR")},{code:"pt-mz",name:s.getMessage("pt_MZ")},{code:"pt-pt",name:s.getMessage("pt_PT")},{code:"ro-ro",name:s.getMessage("ro")},{code:"ru-ru",name:s.getMessage("ru")},{code:"sk-sk",name:s.getMessage("sk")},{code:"sl-si",name:s.getMessage("sl")},{code:"sv",name:s.getMessage("sv")},{code:"ta-in",name:s.getMessage("ta")},{code:"tl-ph",name:s.getMessage("tl")},{code:"uk-ua",name:s.getMessage("uk")},{code:"zh-cn",name:s.getMessage("zh")}],this._languages.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),this._isSubscribed||(s.addEventListener(n.eventNames.localeChanged,(()=>this._languages=null)),this._isSubscribed=!0)),this._languages}static isLanguageVariant(e){return e.code.includes("-")}static getPrimaryLanguageCode(e){return e.split("-")[0]}static formatLanguageCode(e){const t=e.split("-");return 1===t.length?t[0]:2===t.length?t[0]+"-"+t[1].toUpperCase():t[0]+"-"+t[1].toUpperCase()+"-"+t[2]}static getUserLanguageCode(){for(const e of navigator.languages){if(e.includes("-")&&e.startsWith(navigator.language))return e}return navigator.language}static getUserLanguageCodes(){const e=Array.from(navigator.languages,(e=>this.getPrimaryLanguageCode(e).toLowerCase()));try{e.push(this.getPrimaryLanguageCode(t.getUILanguageCode()).toLowerCase())}catch(e){}return function(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}(e)}static getPreferredLanguageVariant(e){const t={"en-in":"en-us","en-ie":"en-gb"},n=navigator.languages||[];for(let s of n){s=s.toLowerCase(),s=t[s]||s;for(const t of e){const e=t.toLowerCase();if(s.length>2&&s===e)return t}}return null}static getLanguagesForGeoIPCountry(){return new Promise((function(e,t){let n=!1;const s=window.setTimeout((()=>{n=!0,t(new Error("geoip timeout"))}),15e3);fetch("https://languagetool.org/webextension/init",{method:"GET",mode:"cors"}).then((e=>e.json())).then((t=>{if(!n){const n=(t.geoIpCountry||"").toUpperCase();e({geoIpLanguages:t.geoIpLanguages||[],geoIpCountry:n}),clearTimeout(s)}})).catch((e=>{console.error(e),n||(t(e),clearTimeout(s))}))}))}}S._languages=null,S._isSubscribed=!1,S.ALL_LANGUAGES=[{code:"ak",name:"Akan"},{code:"am",name:"አማርኛ"},{code:"an",name:"aragonés"},{code:"ar",name:"عربي"},{code:"as",name:"অসমীয়া"},{code:"ast",name:"Asturianu"},{code:"be",name:"Беларуская"},{code:"bg",name:"Български"},{code:"bm",name:"Bamanankan"},{code:"bn",name:"বাংলা"},{code:"br",name:"Brezhoneg"},{code:"bs",name:"босански"},{code:"ca",name:"Català"},{code:"cs",name:"čeština"},{code:"cy",name:"Cymraeg"},{code:"da",name:"Dansk"},{code:"de",name:"Deutsch"},{code:"el",name:"Ελληνικά"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"es",name:"Español"},{code:"et",name:"Eesti keel"},{code:"eu",name:"Euskara"},{code:"fa",name:"فارسی"},{code:"fi",name:"suomi"},{code:"fj",name:"Vosa vaka-Viti"},{code:"fr",name:"Français"},{code:"ga",name:"Gaeilge"},{code:"gd",name:"Gàidhlig"},{code:"gl",name:"Galego"},{code:"gn",name:"Avañe'ẽ"},{code:"gu",name:"ગુજરાતી"},{code:"ha",name:"هَرْشَن هَوْسَ‎"},{code:"he",name:"עברית"},{code:"hi",name:"हिन्दी"},{code:"hr",name:"hrvatski"},{code:"hu",name:"magyar"},{code:"hy",name:"Հայերեն"},{code:"ia",name:"Interlingua"},{code:"id",name:"Bahasa Indonesia"},{code:"ig",name:"Ásụ̀sụ̀ Ìgbò"},{code:"is",name:"íslenska"},{code:"it",name:"Italiano"},{code:"ja",name:"日本語"},{code:"kk",name:"Қазақ"},{code:"km",name:"ខ្មែរ"},{code:"kn",name:"ಕನ್ನಡ"},{code:"ko",name:"한국어"},{code:"ku",name:"Kurdî"},{code:"ks",name:"كشمیری"},{code:"la",name:"Latina"},{code:"lg",name:"Luganda"},{code:"lo",name:"ພາສາລາວ"},{code:"lt",name:"Lietuvių"},{code:"lv",name:"Latviešu"},{code:"mg",name:"malagasy"},{code:"mi",name:"Māori"},{code:"ml",name:"മലയാളം"},{code:"mk",name:"Македонски"},{code:"mn",name:"Монгол"},{code:"mr",name:"मराठी"},{code:"ms",name:"Melayu"},{code:"my",name:"မြန်မာဘာသာ"},{code:"nb",name:"Norsk bokmål"},{code:"ne",name:"नेपाली"},{code:"nn",name:"Norsk nynorsk"},{code:"no",name:"Norsk"},{code:"nl",name:"Nederlands"},{code:"nr",name:"isiNdebele"},{code:"oc",name:"Occitano"},{code:"or",name:"ଓଡ଼ିଆ"},{code:"pa",name:"ਪੰਜਾਬੀ"},{code:"pl",name:"Polski"},{code:"ps",name:"پښتو"},{code:"pt",name:"Português"},{code:"rm",name:"rumantsch"},{code:"ro",name:"românesc"},{code:"ru",name:"Русский"},{code:"rw",name:"Ikinyarwanda"},{code:"sa",name:"संस्कृत"},{code:"si",name:"සිංහල"},{code:"sk",name:"slovenčina"},{code:"sl",name:"Slovenščina"},{code:"so",name:"Soomaali"},{code:"sr",name:"Српски"},{code:"ss",name:"siSwati"},{code:"st",name:"Sesotho"},{code:"sv",name:"Svenska"},{code:"ta",name:"தமிழ்"},{code:"te",name:"తెలుగు"},{code:"th",name:"ภาษาไทย"},{code:"tl",name:"Tagalog"},{code:"fil",name:"Filipino"},{code:"tr",name:"Türkçe"},{code:"ts",name:"Xitsonga"},{code:"tt",name:"Tatarça"},{code:"uk",name:"Українська"},{code:"ur",name:"اُردو"},{code:"uz",name:"Oʻzbek tili"},{code:"ve",name:"Tshivenḓa"},{code:"vi",name:"Tiếng Việt"},{code:"yo",name:"عِدعِ يوْرُبا"},{code:"zh",name:"中文"},{code:"zu",name:"isiZulu"}],S.POPULAR_LANGUAGES=["de","en","es","fr","nl","pl","pt","ru","uk","zh","it","hi"];
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class f{constructor(){this._eventBus=new p,this._onReadyCallbacks=[]}static get DEFAULT_SETTINGS(){return null===this.DEFAULT_SETTINGS_CACHED&&(this.DEFAULT_SETTINGS_CACHED={apiServerUrl:i.MAIN_SERVER_URL,autoCheck:!0,knownEmail:"",username:"",password:"",token:"",userId:null,dpaLevel:0,motherTongue:"",geoIpLanguages:[],geoIpCountry:"",preferredLanguages:[],enVariant:S.getPreferredLanguageVariant(["en-US","en-GB","en-AU","en-CA","en-NZ","en-ZA"])||"en-US",deVariant:S.getPreferredLanguageVariant(["de-DE","de-AT","de-CH"])||"de-DE",ptVariant:S.getPreferredLanguageVariant(["pt-PT","pt-BR","pt-MZ","pt-AO"])||"pt-BR",caVariant:"ca-ES",dictionary:[],hasSynonymsEnabled:!1,hasPickyModeEnabledGlobally:!1,openCardHotkey:"",isDictionarySynced:!1,ignoredRules:[],disabledDomains:[],disabledEditorGroups:[],disabledDomainsCapitalization:[],ignoreCheckOnDomains:[],autoCheckOnDomains:[],confirmedGPT3:!1}),this.DEFAULT_SETTINGS_CACHED}static _combineObjects(e,t){const n=m(e);for(const e in n)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}static _dec2hex(e){return("0"+e.toString(16)).substr(-2)}static _generateUniqueId(){const e=new Uint8Array(8);return window.crypto.getRandomValues(e),Array.from(e,f._dec2hex).join("")}static _normalizeDomain(e=""){return e.toLowerCase().trim().replace(/^www\./,"")}static _isListContainsDomain(e,t){const n=f._normalizeDomain(t);return(e||[]).some((e=>{const t=f._normalizeDomain(e);return t===n||n.endsWith("."+t)}))}static getDefaultSettings(){return m(f.DEFAULT_SETTINGS)}static getDefaultPrivacySettings(){return h(f.DEFAULT_PRIVACY_SETTINGS)}addEventListener(e,t){this._eventBus.subscribe(e,t)}disableDomain(e){const t=f._normalizeDomain(e),n=this.getSettings(),s="object"==typeof n.disabledDomains?n.disabledDomains:[];return s.push(t),this.updateSettings({disabledDomains:s})}enableDomain(e){const t=f._normalizeDomain(e),n=this.getSettings();let s="object"==typeof n.disabledDomains?n.disabledDomains:[];return s=s.filter((e=>{const n=f._normalizeDomain(e);return n!==t&&!t.endsWith("."+n)})),this.updateSettings({disabledDomains:s})}disableEditorGroup(e,t){const n=f._normalizeDomain(e),s=this.getSettings(),i="object"==typeof s.disabledEditorGroups?s.disabledEditorGroups:[];return i.push({domain:n,editorGroupId:t}),this.updateSettings({disabledEditorGroups:i})}enableEditorGroup(e,t){const n=f._normalizeDomain(e),s=this.getSettings();let i="object"==typeof s.disabledEditorGroups?s.disabledEditorGroups:[];return i=i.filter((e=>!(e.domain===n&&e.editorGroupId===t))),this.updateSettings({disabledEditorGroups:i})}enableDomainAndEditorGroup(e,t){return this.getCheckSettings(e,t).isEditorGroupDisabled&&this.enableEditorGroup(e,t),this.enableDomain(e)}disableCapitalization(e){const t=f._normalizeDomain(e),n=this.getSettings(),s="object"==typeof n.disabledDomainsCapitalization?n.disabledDomainsCapitalization:[];return s.push(t),this.updateSettings({disabledDomainsCapitalization:s})}enableCapitalization(e){const t=f._normalizeDomain(e),n=this.getSettings();let s="object"==typeof n.disabledDomainsCapitalization?n.disabledDomainsCapitalization:[];return s=s.filter((e=>{const n=f._normalizeDomain(e);return n!==t&&!t.endsWith("."+n)})),this.updateSettings({disabledDomainsCapitalization:s})}destroy(){this._eventBus.destroy(),this._onReadyCallbacks=[]}}f.eventNames={settingsChanged:"lt-storageController.settingsChanged",configurationChanged:"lt-storageController.configurationChanged",privacySettingsChanged:"lt-storageController.privacySettingsChanged",uiStateChanged:"lt-storageController.uiStateChanged"},f.DEFAULT_SETTINGS_CACHED=null,f.DEFAULT_MANAGED_SETTINGS={apiServerUrl:"",loginUrl:"",disablePrivacyConfirmation:!1,disablePersonalDictionary:!1,disableIgnoredRules:!1},f.DEFAULT_CONFIGURATION={unsupportedDomains:[]},f.DEFAULT_PRIVACY_SETTINGS={allowRemoteCheck:!1},f.DEFAULT_STATISTICS={usageCount:0,sessionCount:0,appliedSuggestions:0,appliedSynonyms:0,hiddenErrors:[],firstVisit:null,lastActivity:null,ratingValue:null,premiumClicks:0,isOverleafUser:!1,isThunderbirdUser:!1,isNotionUser:!1},f.DEFAULT_UI_STATE={hasSeenPrivacyConfirmationDialog:!1,hasPaidSubscription:!1,hasRated:!1,hasUsedValidator:!1,hasSeenOnboarding:!1,isNewUser:!1,hasSeenNewOverleafTeaser:!1,hasSeenNewGoogleDocsTeaser:!1,hasSeenNewGoogleSlidesTeaser:!1,hasSeenGoogleDocsMenuBarHint:!1,lastChangelogNov2021Seen:null,changelogNov2021CountdownEnd:null,changelogNov2021Coupon:null,showRuleId:!1,dialogPosition:"default",countMode:"characters",hasSeenTurnOnMessagePopup:!1},f.DEFAULT_TEST_FLAGS={};class C{static init(e){this._instanceCtor=e}static create(){return this._instanceCtor()}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class T extends f{constructor(){super(),this._onStoredDataChanged=(e,t)=>{let n=!1,s=!1,i=!1,o=!1,r=!1;for(const a in e)"managed"!==t?(/^dictionary(_\d+)?$/.test(a)&&(n=!0),this._settings&&f.DEFAULT_SETTINGS.hasOwnProperty(a)&&"dictionary"!==a&&(this._settings[a]=e[a].newValue,s=!0),this._configuration&&f.DEFAULT_CONFIGURATION.hasOwnProperty(a)&&(this._configuration[a]=e[a].newValue,i=!0),this._privacySettings&&f.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(a)&&(this._privacySettings[a]=e[a].newValue,o=!0),this._statistics&&f.DEFAULT_STATISTICS.hasOwnProperty(a)&&(this._statistics[a]=e[a].newValue),this._uiState&&f.DEFAULT_UI_STATE.hasOwnProperty(a)&&(this._uiState[a]=e[a].newValue,r=!0),this._testFlags&&f.DEFAULT_TEST_FLAGS.hasOwnProperty(a)&&(this._testFlags[a]=e[a].newValue),"uniqueId"===a&&(this._uniqueId=e[a].newValue)):this._managedSettings&&f.DEFAULT_MANAGED_SETTINGS.hasOwnProperty(a)&&(this._managedSettings[a]=e[a].newValue);if(s){for(const e of this._settings.ignoredRules)e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate));this._eventBus.fire(f.eventNames.settingsChanged,e)}n&&this._storage.get().then((e=>{if(!this._settings)return;const t=this._joinChunks(e,"dictionary"),n={dictionary:{oldValue:this._settings.dictionary,newValue:t}};this._settings.dictionary=t,this._eventBus.fire(f.eventNames.settingsChanged,n)})),i&&this._eventBus.fire(f.eventNames.configurationChanged,e),o&&this._eventBus.fire(f.eventNames.privacySettingsChanged,e),r&&this._eventBus.fire(f.eventNames.uiStateChanged,e)},this._storage=T._getStorage(),this._managedStorage=T._getManagedStorage(),this._isInitialized=!1,this._loadData(),browser.storage.onChanged.addListener(this._onStoredDataChanged)}static _getStringSize(e){let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t+=s<128?1:s<2048?2:s<65536?3:s<1<<21?4:s<1<<26?5:s<1<<31?6:Number.NaN}return t}static _getStorage(){return browser.storage.sync&&!e.isFirefox()?browser.storage.sync:browser.storage.local}static _getManagedStorage(){return browser.storage.managed}_splitInChunks(e,t,n=this._storage.QUOTA_BYTES_PER_ITEM){let s=e[t],i=0,o=[],r=T._getStringSize(t)+T._getStringSize("[]");for(;s.length;){const a=s.shift(),c=T._getStringSize(`,"${a}"`);if(r+c>n){e[0===i?t:`${t}_${i}`]=o,i++,o=[a],r=T._getStringSize(`${t}_${n}`)+T._getStringSize(`["${a}"]`)}else o.push(a),r+=c;if(0===s.length){e[0===i?t:`${t}_${i}`]=o}}e[`${t}_${i+1}`]=[]}_joinChunks(e,t,n=this._storage.MAX_ITEMS){let s=e[t]||[];for(let i=1;i<n;i++){const n=e[`${t}_${i}`];if(void 0===n||0===n.length)break;s=s.concat(n)}return s}_loadData(){const e=this._storage.get().then((e=>{const t=f._combineObjects(f.DEFAULT_SETTINGS,e);t.dictionary=this._joinChunks(e,"dictionary");for(const e of t.ignoredRules){if(void 0===e.description){const t=f.DEFAULT_SETTINGS.ignoredRules.find((t=>t.id===e.id&&t.language===e.language));e.description=t?t.description:""}if(void 0===e.turnOffDate){const t=f.DEFAULT_SETTINGS.ignoredRules.some((t=>t.id===e.id&&t.language===e.language));e.turnOffDate=t?null:new Date(2019,9,1)}else null!==e.turnOffDate&&(e.turnOffDate=new Date(e.turnOffDate))}t.disabledDomains=t.disabledDomains.map((e=>E(e,""))).filter((e=>e)),t.ignoreCheckOnDomains=t.ignoreCheckOnDomains.map((e=>E(e,""))).filter((e=>e)),t.autoCheckOnDomains=t.autoCheckOnDomains.map((e=>E(e,""))).filter((e=>e)),this._settings=t,this._configuration=f._combineObjects(f.DEFAULT_CONFIGURATION,e),this._privacySettings=f._combineObjects(f.DEFAULT_PRIVACY_SETTINGS,e),this._statistics=f._combineObjects(f.DEFAULT_STATISTICS,e),this._uiState=f._combineObjects(f.DEFAULT_UI_STATE,e),this._testFlags=f._combineObjects(f.DEFAULT_TEST_FLAGS,e),e.uniqueId?this._uniqueId=e.uniqueId:(this._uniqueId=f._generateUniqueId(),this._storage.set({uniqueId:this._uniqueId})),this._statistics.firstVisit||this.updateStatistics({firstVisit:Math.round(Date.now()/1e3)})})),t=this._managedStorage.get().then((e=>{this._managedSettings=f._combineObjects(f.DEFAULT_MANAGED_SETTINGS,e)})).catch((()=>{this._managedSettings=f._combineObjects(f.DEFAULT_MANAGED_SETTINGS,{})}));Promise.all([e,t]).then((()=>{this._isInitialized=!0,this._onReadyCallbacks.forEach((e=>e(this))),this._onReadyCallbacks=[]}))}isReady(){return this._isInitialized}onReady(e){this._isInitialized?e(this):this._onReadyCallbacks.push(e)}getUniqueId(){return this._uniqueId}getSettings(){return m(this._settings)}updateSettings(t){for(const e in t)if(!f.DEFAULT_SETTINGS.hasOwnProperty(e))throw new Error(`Unknown setting ${e}`);if(Object.assign(this._settings||{},m(t)),void 0===t.dictionary||e.isFirefox()||this._splitInChunks(t,"dictionary"),void 0!==t.ignoredRules)for(const e of t.ignoredRules)null!==e.turnOffDate&&(e.turnOffDate=e.turnOffDate.toISOString());return this._storage.set(t)}getCheckSettings(e,t){if(!this._settings)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,shouldCapitalizationBeChecked:!0};if(e===browser.runtime.id)return{isDomainDisabled:!1,isEditorGroupDisabled:!1,isAutoCheckEnabled:!0,shouldCapitalizationBeChecked:!0};const n=(this._settings.disabledEditorGroups||[]).some((n=>f._normalizeDomain(n.domain)===f._normalizeDomain(e)&&n.editorGroupId===t)),s=f._isListContainsDomain(this._settings.disabledDomains,e),i=!f._isListContainsDomain(this._settings.disabledDomainsCapitalization,e);if(this._settings.autoCheck){return{isDomainDisabled:s,isEditorGroupDisabled:n,isAutoCheckEnabled:!f._isListContainsDomain(this._settings.ignoreCheckOnDomains,e),shouldCapitalizationBeChecked:i}}return{isDomainDisabled:s,isEditorGroupDisabled:n,isAutoCheckEnabled:f._isListContainsDomain(this._settings.autoCheckOnDomains,e),shouldCapitalizationBeChecked:i}}hasLanguageToolAccount(){return Boolean(this._settings&&this._settings.username&&!this.hasCustomServer())}hasCustomServer(){return this._managedSettings&&this._managedSettings.apiServerUrl?this._managedSettings.apiServerUrl!==f.DEFAULT_SETTINGS.apiServerUrl:Boolean(this._settings&&this._settings.apiServerUrl&&this._settings.apiServerUrl.trim()&&this._settings.apiServerUrl!==i.MAIN_SERVER_URL&&this._settings.apiServerUrl!==i.PREMIUM_SERVER_URL)}getCustomServerUrl(){return this.hasCustomServer()?this._managedSettings.apiServerUrl||this._settings.apiServerUrl:null}getManagedSettings(){return h(this._managedSettings)}getConfiguration(){return h(this._configuration)}updateConfiguration(e){for(const t in e)if(!f.DEFAULT_CONFIGURATION.hasOwnProperty(t))throw new Error(`Unknown configuration ${t}`);return Object.assign(this._configuration||{},h(e)),this._storage.set(e)}isDomainSupported(e){return!this._configuration||!this._configuration.unsupportedDomains.includes("*")&&!f._isListContainsDomain(this._configuration.unsupportedDomains,e)}getPrivacySettings(){return h(this._privacySettings)}updatePrivacySettings(e){for(const t in e)if(!f.DEFAULT_PRIVACY_SETTINGS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return Object.assign(this._privacySettings||{},e),this._storage.set(e)}getStatistics(){return m(this._statistics)}updateStatistics(e){for(const t in e)if(!f.DEFAULT_STATISTICS.hasOwnProperty(t))throw new Error(`Unknown privacy setting ${t}`);return Object.assign(this._statistics||{},e),this._storage.set(e)}getUIState(){return m(this._uiState)}updateUIState(e){for(const t in e)if(!f.DEFAULT_UI_STATE.hasOwnProperty(t))throw new Error(`Unknown UI state ${t}`);return Object.assign(this._uiState||{},e),this._storage.set(e)}checkForPaidSubscription(){return new Promise(((e,t)=>{this.onReady((()=>{const{username:n,password:s,token:i}=this.getSettings();let o=null;if("function"==typeof window.LTAssistantChecker){const e=this.hasCustomServer()?this.getCustomServerUrl():void 0;o=window.LTAssistantChecker.checkForPaidSubscription(n,s,i,e)}else{const e={command:"CHECK_FOR_PAID_SUBSCRIPTION",username:n,password:s,token:i};o=browser.runtime.sendMessage(e).then((e=>{if("CHECK_FOR_PAID_SUBSCRIPTION"===(t=e).initialCommand&&t.isSuccessful)return e.hasPaidSubscription;if(function(e){return"CHECK_FOR_PAID_SUBSCRIPTION"===e.initialCommand&&!e.isSuccessful}(e))throw e.error;var t;return!1}))}o.then((t=>{t?this.enablePaidSubscription():this.disablePaidSubscription(),e(t)})).catch(t)}))}))}enablePaidSubscription(){return!this._uiState||this._uiState.hasPaidSubscription?Promise.resolve():this.updateUIState({hasPaidSubscription:!0})}disablePaidSubscription(){return this._uiState&&this._uiState.hasPaidSubscription?this.updateUIState({hasPaidSubscription:!1}):Promise.resolve()}getTestFlags(){return h(this._testFlags)}updateTestFlags(e){for(const t in e)if(!f.DEFAULT_TEST_FLAGS.hasOwnProperty(t))throw new Error(`Unknown test flag ${t}`);return Object.assign(this._testFlags||{},e),this._storage.set(e)}getActiveCoupon(){const{changelogNov2021CountdownEnd:e,changelogNov2021Coupon:t,hasPaidSubscription:n}=this.getUIState();if(n)return null;if(e&&t&&Date.now()<e){const n=20,{geoIpCountry:s}=this.getSettings(),i=this._getDefaultCoupon(s);return i&&i.percent>n?Object.assign(Object.assign({},i),{expires:e}):{code:t,expires:e,percent:n}}return null}_getDefaultCoupon(e){for(const t in i.COUNTRY_COUPON_MAPPING)if(i.COUNTRY_COUPON_MAPPING.hasOwnProperty(t)&&i.COUNTRY_COUPON_MAPPING[t].countries.includes(e))return{code:t,percent:i.COUNTRY_COUPON_MAPPING[t].percent};return null}isRelevantForChangelogCoupon(){if(this.hasCustomServer())return{status:!1,reason:1};const{hasPaidSubscription:e}=this.getUIState();if(e)return{status:!1,reason:2};let{firstVisit:t,appliedSuggestions:n}=this.getStatistics();if(!t)return{status:!1,reason:3};t*=1e3;return Date.now()-t<6048e5?{status:!1,reason:4}:n<8?{status:!1,reason:5}:{status:!0}}startChangelogCoupon(){if(!this.canStartChangelogCoupon())return;const e=Date.now();var t,n;this.updateUIState({changelogNov2021Coupon:"2021-NOV-CHANGELOG",changelogNov2021CountdownEnd:e+1656e5+(t=0,n=72e5,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t)})}isChangelogCouponRunning(){if(!this.isRelevantForChangelogCoupon().status)return!1;const{changelogNov2021CountdownEnd:e}=this.getUIState();return Boolean(e&&e>Date.now())}canStartChangelogCoupon(){if(!this.isRelevantForChangelogCoupon().status)return!1;const e=Date.now(),{changelogNov2021CountdownEnd:t}=this.getUIState();return!t||e-t>i.COUPON_INTERVAL}destroy(){this._isInitialized=!1,super.destroy();try{browser.storage.onChanged.removeListener(this._onStoredDataChanged)}catch(e){}}}
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class A{static init(){if(A._isInitialized)return;this.TRACKING_SITE_ID=t.getTrackingId(),this.VERSION=t.getVersion(),this._storageController=C.create();const e=t.getURL("/");window.addEventListener("error",(t=>{const n=t.message,s=t.filename,i=t.lineno,o=t.error;if(!s||!s.startsWith(e))return;if("string"!=typeof n)return;if(n.includes("ResizeObserver"))return;const r=o&&function(e){if(!e.stack)return;let t=[];if(e.stack.split(/\n/).forEach((e=>{const n=e.match(/([\w_<>]+)\s+\(.+?([\w_\-]+\.(js|html))/);n&&t.push(`${n[2]}:${n[1]}`)})),!t.length){const n=e.stack.match(/([\w_\-]+\.(js|html))/);n&&t.push(n[1])}return t.join(",").substr(0,140)}(o);r?A.trackError("js",n,r):A.trackError("js",n,`${s}:${i}`)})),A._isInitialized=!0}static getCustomDimensions(){const e=A._storageController.getSettings(),t=A._storageController.getUIState();return{dimension2:this.VERSION,dimension3:t.hasPaidSubscription,dimension4:e.username&&(e.password||e.token),dimension5:e.preferredLanguages.join(","),dimension6:e.hasPickyModeEnabledGlobally}}static _getTrackingUrlForPageView(e){return e=(e=e.replace(/^(chrome|moz|safari|edge)-extension:\/\/.+?\//i,"")).replace(/^[a-z0-9]{8}\//i,"/"),e=`${A.TRACKING_BASE_PAGE_URL}${e}`,new Promise(((t,n)=>{A._storageController.onReady((()=>{const{firstVisit:n,sessionCount:s}=A._storageController.getStatistics(),i=A._storageController.getUniqueId(),o=Object.assign({idsite:A.TRACKING_SITE_ID,rec:"1",url:e,rand:Date.now(),apiv:"1",res:`${screen.width}x${screen.height}`,_id:i,_idts:n,_idvc:s},this.getCustomDimensions());let r="";for(const e in o)o.hasOwnProperty(e)&&(r+=`${e}=${encodeURIComponent(o[e])}&`);t(`${A.TRACKING_BASE_URL}?${r}`)}))}))}static _getTrackingUrlForEvent(e,t,n="",s){return s=s||A.TRACKING_BASE_PAGE_URL,new Promise(((i,o)=>{A._storageController.onReady((()=>{const{firstVisit:o,sessionCount:r}=A._storageController.getStatistics(),a=A._storageController.getUniqueId(),c=Object.assign({idsite:A.TRACKING_SITE_ID,rec:"1",url:s,action_name:t,rand:Date.now(),apiv:"1",res:`${screen.width}x${screen.height}`,_id:a,_idts:o,_idvc:r,e_c:e,e_a:t,e_n:n},this.getCustomDimensions());let d="";for(const e in c)c.hasOwnProperty(e)&&(d+=`${e}=${encodeURIComponent(c[e])}&`);i(`${A.TRACKING_BASE_URL}?${d}`)}))}))}static _sendRequest(e){if(t.shouldTrack()&&!A._storageController.hasCustomServer()&&!navigator.webdriver){const t=new Image;t.referrerPolicy="no-referrer",t.src=e}}static trackPageView(e){e=e||_(),A._getTrackingUrlForPageView(e).then((n=>{t.isProductionEnvironment()?A._sendRequest(n):console.log("LT Page view tracking disabled in dev mode",{pageUrl:e,trackingUrl:n})})).catch((e=>{console.log("LT could not track because:",e&&e.message)}))}static trackDisabledRule(e,n,s,o){if(!e.match(/^de|en|nl|es|fr|ca|pt/i))return;const r=o?i.PACKAGE.PREMIUM:i.PACKAGE.BASIC,a=e+":"+n,c=s;let d=A.TRACKING_BASE_URL;d+=`?idsite=18&rec=1&url=${encodeURIComponent(A.TRACKING_BASE_PAGE_URL)}`,d+=`&action_name=${r}&rand=${Date.now()}&apiv=1&_id=${this._storageController.getUniqueId()}`,d+=`&e_c=${r}&e_a=${encodeURIComponent(a)}&e_n=${encodeURIComponent(s)}`,t.isProductionEnvironment()?this._sendRequest(d):console.log("LT Event tracking disabled in dev mode",{actionCategory:r,action:a,actionName:c,trackingUrl:d})}static trackDictionaryEvent(e,n,s=!1){if(!e.match(/^de|en|nl|es|fr|it|pt|ru|ca|pl/i))return;const i=s?"TemporaryIgnored":"PersistentlyIgnored",o=`${e}:add_word`,r=n;let a=A.TRACKING_BASE_URL;a+=`?idsite=19&rec=1&url=${encodeURIComponent(A.TRACKING_BASE_PAGE_URL)}`,a+=`&action_name=${i}&rand=${Date.now()}&apiv=1&_id=${this._storageController.getUniqueId()}`,a+=`&e_c=${i}&e_a=${encodeURIComponent(o)}&e_n=${encodeURIComponent(n)}`,t.isProductionEnvironment()?this._sendRequest(a):console.log("LT Event tracking disabled in dev mode",{actionCategory:i,action:o,actionName:r,trackingUrl:a})}static trackEvent(e,n,s,i){this._getTrackingUrlForEvent(e,n,s,i).then((i=>{t.isProductionEnvironment()?this._sendRequest(i):console.log("LT Event tracking disabled in dev mode",{actionCategory:e,action:n,actionName:s,trackingUrl:i})})).catch((e=>{console.log("LT could not track because:",e&&e.message)}))}static trackInstall(){A.trackEvent("Action","install",S.getPrimaryLanguageCode(navigator.language)),this._storageController.updateUIState({isNewUser:!0})}static trackActivity(){const e=Date.now(),{sessionCount:t,firstVisit:n,lastActivity:s}=this._storageController.getStatistics(),{isNewUser:i}=this._storageController.getUIState();if((!s||e-s>A.ACTIVITY_TRACK_INTERVAL)&&(this._storageController.updateStatistics({sessionCount:t+1,lastActivity:e}),this.trackEvent("Action","ping",S.getPrimaryLanguageCode(navigator.language))),i&&n){const t=6048e5,s=8*t,i=e-1e3*n;i>t&&i<s&&this._storageController.updateUIState({isNewUser:!1}).then((()=>{this.trackEvent("Action","active_after_one_week",S.getPrimaryLanguageCode(navigator.language))})).catch((e=>{const t=String(e&&e.message?e.message:e);this.trackEvent("JS-Error",`activity error: ${t}`)}))}}static trackError(t,n,s=""){try{if(e.isUnsupportedBrowser())return;if(A._errorCount++,A._errorCount>i.MAX_EXCEPTION_COUNT)return;if("string"!=typeof n)return;if(A._loggedErrors)if(A._loggedErrors.length<A.THROTTLE_REQUESTS)A._loggedErrors.push(Date.now());else{const e=Date.now();if(!(e-A._loggedErrors[0]>=A.MAX_TIME))return;A._loggedErrors.push(e),A._loggedErrors.splice(0,1)}else A._loggedErrors=[Date.now()];let o="JS-Error";"message"===t?o="Message-Error":"http"===t?o="HTTP-Error":"other"===t&&(o="Other-Error");let r=_();r=r.replace(/^moz-extension:\/\/[a-z0-9\-]+\//,"moz-extension://xxxx-xxxx-xxxx-xxxx/"),r.match(/(chrome|moz|safari)\-extension:/)||(r=void 0),this.trackEvent(o,n,s||r,r)}catch(e){console.error("Error while logging error from language tool",e)}}static trackStat(e,t){0===Math.floor(10*Math.random())&&A.trackEvent("Stat",e,t)}static trackTextLength(e){if(0===e)return;let t="";t=e<=100?"1-100":e<=1e3?"101-1000":e<=2500?"1001-2500":e<=5e3?"2501-5000":e<=7500?"5001-7500":e<=1e4?"7501-10000":e<=15e3?"10001-15000":e<=2e4?"15001-20000":e<=4e4?"20001-40000":e<=6e4?"40001-60000":e<=8e4?"60001-80000":e<=1e5?"80001-100000":">100000",this.trackStat("text_length",t)}}A.TRACKING_BASE_URL="https://analytics.languagetoolplus.com/matomo/piwik.php",A.TRACKING_BASE_PAGE_URL="https://fake/",A.ACTIVITY_TRACK_INTERVAL=864e5,A.MAX_TIME=6e4,A.THROTTLE_REQUESTS=10,A._isInitialized=!1,A._loggedErrors=null,A._errorCount=0;
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class I{constructor(e=document){this._window=e.defaultView,this._document=e,this.clearCache()}_getElementCache(e){let t=this._elementCache.get(e);return t||(t={},this._elementCache.set(e,t)),t}clearCache(){this._documentVisibleBox=null,this._documentGap=null,this._documentScroll=null,this._elementCache=new WeakMap}_contains(e,t){return e&&e!==t&&e.contains(t)}_getComputedStyle(e,t,n){let s,i;return"object"==typeof t?(s=t,i=""):(s=n,i=t),s.computedStyle||(s.computedStyle=new Map),s.computedStyle.has(i)||s.computedStyle.set(i,this._window.getComputedStyle(e,i||null)),s.computedStyle.get(i)}getComputedStyle(e,t=""){return this._getComputedStyle(e,t,this._getElementCache(e))}_getComputedStyleMap(e,t){return e.computedStyleMap?(t.computedStyleMap||(t.computedStyleMap=e.computedStyleMap()),t.computedStyleMap):null}getComputedStyleMap(e){return this._getComputedStyleMap(e,this._getElementCache(e))}getInlineStyle(e,t){return e.style.getPropertyValue(t)}getStyle(e,t,n=""){return this.getStyles(e,[t],n)[t]}getStyles(e,t,n=""){let s=null,i={};const o=this._getElementCache(e);for(const r of t)if(s=s||this._getComputedStyle(e,n,o),"line-height"===r||"lineHeight"===r)i[r]=this.getInlineStyle(e,r)||s[r]||"";else if("font"!==r||s[r])i[r]="zoom"===r?s[r]||"1":s[r]||"";else{const t=s["font-style"],n=s["font-variant"],o=s["font-weight"],a=s["font-size"],c=this.getInlineStyle(e,"line-height")||s["line-height"]||"",d=s["font-family"];i[r]=`${t} ${n} ${o} ${a} ${c?"/ "+c:""} ${d}`}return i}getExactStyle(e,t){return this.getExactStyles(e,[t])[t]}getExactStyles(e,t){const n=this._getElementCache(e),s=this._getComputedStyleMap(e,n);if(s){const e={};for(const n of t){const t=s.get(n);t?"number"==typeof(i=t).value&&"string"==typeof i.unit?"number"===t.unit?e[n]=t.value.toString():e[n]=t.value+t.unit:e[n]=t.toString():e[n]=""}return e}return this.getStyles(e,t);var i}setStyles(e,t,n=!1){Array.isArray(e)||(e=[e]);for(const s of e)for(const e in t){let i=t[e].trim();const o=n||I.IMPORTANT_REG_EXP.test(i);i=i.replace(I.IMPORTANT_REG_EXP,""),s.style.setProperty(e,i,o?"important":"")}}copyStyles(e,t,n,s=!1){const i=this.getStyles(e,n);this.setStyles(t,i,s)}resetStyles(e,t,n=!1){Array.isArray(e)||(e=[e]);let s="";for(const e in t){let i=t[e].trim();n&&!I.IMPORTANT_REG_EXP.test(i)&&(i+=" !important"),s+=`${e}: ${i};`}for(const t of e)t.style.cssText=s}removeStyle(e,t){Array.isArray(e)||(e=[e]),this.removeStyles(e,[t])}removeStyles(e,t){Array.isArray(e)||(e=[e]);for(const n of e)for(const e of t)n.style.removeProperty(e)}_getBoundingClientRect(e,t){return t.boundingClientRect||(t.boundingClientRect=m(e.getBoundingClientRect())),t.boundingClientRect}_getBorderBox(e,t,n,s){const i="borderBox"+(t?"WithScroll":"")+(n?"WithScale":"");if(!s[i]){const o=this._getBoundingClientRect(e,s);let{top:r,left:a,width:c,height:d}=o;if(n){const t=this.getZoom(e);r*=t,a*=t,c*=t,d*=t}else{const t=this._getScaleFactor(e,s);c/=t.x,d/=t.y}if(t){const t=this.getDocumentScroll();if(r+=t.top,a+=t.left,this._document.body&&this._contains(this._document.body,e)){const e=this.getDocumentGap();r-=e.top,a-=e.left}}s[i]={top:r,right:a+c,bottom:r+d,left:a,width:c,height:d}}return s[i]}getBorderBox(e,t=!0,n=!0){return this._getBorderBox(e,t,n,this._getElementCache(e))}_getPaddingBox(e,t,n,s){const i="paddingBox"+(t?"WithScroll":"")+(n?"WithScale":"");if(!s[i]){let{top:o,left:r,width:a,height:c}=this._getBorderBox(e,t,n,s),d={x:1,y:1};n&&(d=this._getScaleFactor(e,s));const l=n?this._getZoom(e,s):1,g=this._getComputedStyle(e,s),u=(parseFloat(g["border-top-width"])||0)*d.y*l,h=(parseFloat(g["border-right-width"])||0)*d.x*l,m=(parseFloat(g["border-bottom-width"])||0)*d.y*l,_=(parseFloat(g["border-left-width"])||0)*d.x*l;let E=0,p=0;if("BackCompat"!==this._document.compatMode||e!==this._document.body||e!==this._document.scrollingElement){const t=e.clientWidth*d.x*l,n=e.clientHeight*d.y*l;E=a-_-t-h,p=c-u-n-m,E<1&&(E=0),p<1&&(p=0)}o+=u,r+=_,a=a-_-E-h,c=c-u-p-m,this._isRTL(e,s)&&(r+=E),s[i]={top:o,right:r+a,bottom:o+c,left:r,width:a,height:c,border:{top:u,right:h,bottom:m,left:_}}}return s[i]}getPaddingBox(e,t=!0,n=!0){return this._getPaddingBox(e,t,n,this._getElementCache(e))}_getContentBox(e,t,n,s){const i="contentBox"+(t?"WithScroll":"")+(n?"WithScale":"");if(!s[i]){let{top:o,left:r,width:a,height:c,border:d}=this._getPaddingBox(e,t,n,s),l={x:1,y:1};n&&(l=this._getScaleFactor(e,s));const g=n?this._getZoom(e,s):1,u=this._getComputedStyle(e,s),h=(parseFloat(u["padding-top"])||0)*l.y*g,m=(parseFloat(u["padding-right"])||0)*l.x*g,_=(parseFloat(u["padding-bottom"])||0)*l.y*g,E=(parseFloat(u["padding-left"])||0)*l.x*g;o+=h,r+=E,a=a-E-m,c=c-h-_,s[i]={top:o,right:r+a,bottom:o+c,left:r,width:a,height:c,border:d,padding:{top:h,right:m,bottom:_,left:E}}}return s[i]}getContentBox(e,t=!0,n=!0){return this._getContentBox(e,t,n,this._getElementCache(e))}_getScrollDimensions(e,t,n){const s="scrollDimensions"+(t?"WithScale":"");if(!n[s]){let i=e.scrollWidth,o=e.scrollHeight;if(t){const t=this._getScaleFactor(e,n),s=this._getZoom(e,n);i=i*t.x*s,o=o*t.y*s}n[s]={width:i,height:o}}return n[s]}getScrollDimensions(e,t=!0){return this._getScrollDimensions(e,t,this._getElementCache(e))}_getScrollPosition(e,t,n,s){const i="scrollPosition"+(t?"WithScale":"")+(n?"WithZoom":"");if(!s[i]){let o={x:1,y:1};t&&(o=this._getScaleFactor(e,s));const r=n?this._getZoom(e,s):1,a=e===this._document.body&&"BackCompat"===this._document.compatMode,c=a?0:e.scrollTop*o.y*r,d=a?0:e.scrollLeft*o.x*r;s[i]={top:c,left:d}}return s[i]}getScrollPosition(e,t=!0,n=t){return this._getScrollPosition(e,t,n,this._getElementCache(e))}getScaleFactor(e){return this._getScaleFactor(e,this._getElementCache(e))}_getScaleFactor(t,n){if(void 0===n.scaleFactor){if(t instanceof SVGElement){if(e.isFirefox()||e.isThunderbird())return{x:1,y:1};let n=1;const s=t.getAttribute("transform")||"",i=/scale\((\d+(\.\d+)?)\)/.exec(s);return i&&(n=+i[1]),{x:n,y:n}}{const e=this._getBoundingClientRect(t,n),s=t.offsetWidth,i=t.offsetHeight;n.scaleFactor={x:1,y:1},e.width>0&&s>0&&Math.abs(e.width-s)>1&&(n.scaleFactor.x=e.width/s),e.height>0&&i>0&&Math.abs(e.height-i)>1&&(n.scaleFactor.y=e.height/i)}}return n.scaleFactor}_getZoom(t,n){if(e.isFirefox()||e.isThunderbird())return 1;if("number"!=typeof n.zoom){let e=1,s=t;for(;s&&s!==this._document.documentElement;){e*=+this.getStyle(s,"zoom"),s=s.parentElement}n.zoom=e}return n.zoom}getZoom(e){return this._getZoom(e,this._getElementCache(e))}_getStackingContextWithZIndex(e){const t=this.getComputedStyle(e),n=parseInt(t.zIndex||"");if(isNaN(n))return null;if(t.position&&I.NON_STATIC_POSITIONS.indexOf(t.position)>-1)return{zIndex:n};if(e.parentElement){const t=this.getComputedStyle(e.parentElement);if("flex"===t.display||"grid"===t.display)return{zIndex:n}}return null}getZIndex(e,t=this._document.documentElement){let n="auto",s=e;if(!s.ownerDocument)return"auto";const i=s.ownerDocument.defaultView.Element,o=s.ownerDocument.defaultView.ShadowRoot;for(;s&&s!==this._document&&s!==t&&s instanceof i;){const e=this._getStackingContextWithZIndex(s);e&&(n=e.zIndex),s=s.parentNode instanceof o?s.parentNode.host:s.parentElement}return n}_isRTL(e,t){return"boolean"!=typeof t.isRTL&&(t.isRTL="rtl"===this.getStyle(e,"direction")),t.isRTL}isRTL(e){return this._isRTL(e,this._getElementCache(e))}isStackingContext(e){const t=this.getComputedStyle(e);return!!(t.position&&I.NON_STATIC_POSITIONS.indexOf(t.position)>-1)||("none"!==t.transform||"none"!==t.filter||"none"!==t.clipPath||"none"!==t.perspective||Number(t.opacity)<1)}_getTextClientRects(e){const t=this._document.createRange();return t.setStart(e.node,e.start),t.setEnd(e.node,e.end),Array.from(t.getClientRects())}getTextBoundingBoxes(e,t,n=!0){Array.isArray(e)||(e=[e]);let s=[],i=0,o=0;if(n){const e=this.getDocumentScroll();if(i+=e.top,o+=e.left,this._document.body&&this._contains(this._document.body,t)){const e=this.getDocumentGap();i-=e.top,o-=e.left}}for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<I.MIN_TEXT_BOX_WIDTH)continue;const e=s[s.length-1],n=t.top+i,r=t.right+o,a=t.bottom+i,c=t.left+o,d=t.width,l=t.height;e&&e.right===c&&e.top===n&&e.bottom===a&&e.height===l?(e.right=r,e.width=e.width+d):s.push({top:n,right:r,bottom:a,left:c,width:d,height:l})}}catch(e){}return s}getRelativeTextBoundingBoxes(e,t,n=this.getScrollPosition(t)){Array.isArray(e)||(e=[e]);let s=[];const i=this.getPaddingBox(t,!1,!1),o=i.left-n.left,r=i.top-n.top;for(const t of e)try{const e=this._getTextClientRects(t);for(const t of e){if(t.width<I.MIN_TEXT_BOX_WIDTH)continue;const e=s[s.length-1],n=t.top-r,i=t.right-o,a=t.bottom-r,c=t.left-o,d=t.width,l=t.height;e&&e.right===c&&e.top===n&&e.bottom===a&&e.height===l?(e.right=i,e.width=e.width+d):s.push({top:n,right:i,bottom:a,left:c,width:d,height:l})}}catch(e){console.error("LT range error",e)}const a=this.getScaleFactor(t);for(const e of s)e.top=Math.round(e.top/a.y),e.right=Math.round(e.right/a.x),e.bottom=Math.round(e.bottom/a.y),e.left=Math.round(e.left/a.x),e.width=e.right-e.left,e.height=e.bottom-e.top;return s}getRelativeTextBoundingBox(e,t){const n=this.getRelativeTextBoundingBoxes(e,t),s=Math.min(...n.map((e=>e.top))),i=Math.max(...n.map((e=>e.right))),o=Math.max(...n.map((e=>e.bottom))),r=Math.min(...n.map((e=>e.left)));return{top:s,right:i,bottom:o,left:r,width:i-r,height:o-s}}_hasRelativePosition(e,t){const n=this._getComputedStyle(e,t).position||"static";return I.NON_STATIC_POSITIONS.indexOf(n)>-1}getDocumentGap(){if(!this._documentGap&&(this._documentGap={top:0,left:0},this._document.body&&this._hasRelativePosition(this._document.body,this._getElementCache(this._document.body)))){const t=this.getBorderBox(this._document.documentElement),n=this.getBorderBox(this._document.body);let s=this._document.documentElement.offsetTop,i=this._document.documentElement.offsetLeft;if(e.isFirefox()||e.isThunderbird()){let e=null;0===s&&(e=this.getComputedStyle(this._document.documentElement),s=parseInt(e["margin-top"])||0),0===i&&(e=e||this.getComputedStyle(this._document.documentElement),i=parseInt(e["margin-left"])||0)}const o=n.top-t.top+s,r=n.left-t.left+i,a=this.getComputedStyle(this._document.body),c=parseFloat(a["border-top-width"])||0,d=parseFloat(a["border-left-width"])||0;this._documentGap={top:o+c,left:r+d}}return this._documentGap}getDocumentVisibleBox(){if(!this._documentVisibleBox){const t=this.getDocumentScroll();let n=this._document.documentElement.clientHeight,s=this._document.documentElement.clientWidth;e.isThunderbird()&&(n=window.innerHeight,s=window.innerWidth),this._documentVisibleBox={top:t.top,right:t.left+s,bottom:t.top+n,left:t.left,width:s,height:n}}return this._documentVisibleBox}getDocumentScroll(){if(!this._documentScroll){const e=this._document.documentElement&&this._document.documentElement.scrollTop||this._document.body&&this._document.body.scrollTop||0,t=this._document.documentElement&&this._document.documentElement.scrollLeft||this._document.body&&this._document.body.scrollLeft||0;this._documentScroll={top:e,left:t}}return this._documentScroll}}function R(e,t){"string"==typeof e&&(e=document.querySelector(e)),"string"==typeof t&&(t={key:t}),t.isHTML?e.innerHTML=s.getMessage(t.key,t.interpolations):t.attr?e[t.attr]=s.getMessage(t.key,t.interpolations):e.textContent=s.getMessage(t.key,t.interpolations)}I.IMPORTANT_REG_EXP=/!important$/,I.TRANSFORM_MATRIX_REG_EXP=/(?:matrix|scale)\(([\d\.]+),/,I.NON_STATIC_POSITIONS=["relative","fixed","absolute","sticky"],I.MIN_TEXT_BOX_WIDTH=.1;(()=>{const e=(e,t,n,s)=>{const i=e.ownerDocument;let o=i.elementFromPoint(n,s);if(!o)return!1;if(e===o||e.contains(o))return!0;if(!t.length)return!1;const r=t.find((e=>e.contains(o)));return r&&(o=i.elementsFromPoint(n,s).find((e=>!r.contains(e)))||null),Boolean(o&&(e===o||e.contains(o)))}})();(()=>{let e;const t=[]})(),(()=>{let e;const t=[]})();function b(e){if(e.ownerDocument&&e.ownerDocument.contains(e))return!0;for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof DocumentFragment?t.parentNode.host:t.parentNode}return!1}function y(e,t,n,s=Date.now().toString()){const i=void 0!==window.screenLeft?window.screenLeft:window.screenX,o=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,c=r/window.screen.availWidth,d=(r-t)/2/c+i,l=(a-n)/2/c+o;return window.open(e,s,`\n      scrollbars=yes,\n\t  resizable=yes,\n      width=${t/c},\n      height=${n/c},\n      top=${l},\n      left=${d}\n      `)}(function(){let e,t=null;const n=t=>{t.origin.match(/^chrome|moz|safari/)&&e(t.data)}})(),function(){let e,t=null;const n=t=>{e(t.data)}}();let N,w;!function(){const e=/ /g,t=/^#(?:[0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{8})$/i,n=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,s=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,i=/^rgba?\(/i,o=/^rgba?\((\d+),(\d+),(\d+)(?:,(\d*(?:\.\d+)?))?\)/i,r=/^hsla?\(/i,a=/^hsla?\(\d+,\d+%,(\d+)%(?:,(\d*(?:\.\d+)?))?\)/i;function c(e,t,n){const s=Math.max(e,t,n)/255,i=Math.min(e,t,n)/255;return Math.round((s+i)/2*100)}N=function(c){if("string"!=typeof c)return 3===c.length?1:c[3];if(c=c.replace(e,""),t.test(c)){const e=n.exec(c)||s.exec(c);if(e&&e[4])return parseInt(2===e[4].length?e[4]:e[4]+e[4],16)/255}else if(i.test(c)){const e=o.exec(c);if(e&&e[4])return+e[4]}else if(r.test(c)){const e=a.exec(c);if(e&&e[2])return+e[2]}return 1},w=function(d){if("string"!=typeof d)return c(d[0],d[1],d[2]);if(d=d.replace(e,""),t.test(d)){const e=n.exec(d)||s.exec(d);if(e){return c(parseInt(2===e[1].length?e[1]:e[1]+e[1],16),parseInt(2===e[2].length?e[2]:e[2]+e[2],16),parseInt(2===e[3].length?e[3]:e[3]+e[3],16))}}else if(i.test(d)){const e=o.exec(d);if(e){return c(+e[1],+e[2],+e[3])}}else if(r.test(d)){const e=a.exec(d);if(e)return+e[1]}return 100}}();Array.from({length:16},((e,t)=>t.toString(16)));
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
s.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends n{addEventListener(e,t){}setLocale(e){}getMessage(e,t){return browser.i18n.getMessage(e,t)}}),C.init((()=>new T)),t.init(new
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class extends
/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
class{}{constructor(){super(...arguments),this._isProductionEnvironmentCached=null}isProductionEnvironment(){if(null===this._isProductionEnvironmentCached){if(e.isSafari())return!0;e.isFirefox()||e.isThunderbird()?this._isProductionEnvironmentCached=!browser.runtime.id.match("languagetool.dev"):this._isProductionEnvironmentCached="update_url"in browser.runtime.getManifest()}return this._isProductionEnvironmentCached}isRuntimeConnected(){try{return browser.runtime.getManifest(),!0}catch(e){return!1}}getVersion(){if(this.isRuntimeConnected()){const e=browser.runtime.getManifest();return e&&e.version?e.version:"unknown"}return"unknown"}getTrackingId(){return e.isSafari()?"13":e.isThunderbird()?"22":"12"}shouldTrack(){return"1"!==navigator.doNotTrack}getType(){return"extension"}getURL(e){return browser.runtime.getURL(e)}getUILanguageCode(){return browser.i18n.getUILanguage()}openWindow(e){browser.runtime.sendMessage({command:"OPEN_URL",url:e})}loadContentScripts(e,t){return this.isRuntimeConnected()?(browser.runtime.getManifest().content_scripts.forEach((n=>{if("js"===t&&n.js){const t=n.js.map((e=>{const t=this.getURL(e);return fetch(t).then((e=>e.text()))}));return Promise.all(t).then((t=>{const n=t.join("\n");e.eval(n)}))}if("css"===t&&n.css){const t=n.css.map((e=>{const t=this.getURL(e);return fetch(t).then((e=>e.text()))}));return Promise.all(t).then((t=>{t.forEach((t=>{const n=e.document.createElement("style");n.textContent=t,(e.document.head||e.document.documentElement).appendChild(n)}))}))}})),Promise.resolve()):Promise.reject()}initializeLTAssistant(e,t={}){return Promise.resolve()}getPreferredLanguages(){return browser.runtime.sendMessage({command:"GET_PREFERRED_LANGUAGES"})}startDictionarySync(){return browser.runtime.sendMessage({command:"START_DICTIONARY_SYNC"})}updateDictionary(){return browser.runtime.sendMessage({command:"UPDATE_DICTIONARY"})}addWordToDictionary(e){const t={command:"ADD_WORD_TO_DICTIONARY",word:e};return browser.runtime.sendMessage(t)}addWordsToDictionary(e){const t={command:"BATCH_ADD_WORDS_TO_DICTIONARY",words:e};return browser.runtime.sendMessage(t)}removeWordFromDictionary(e){const t={command:"REMOVE_WORD_FROM_DICTIONARY",word:e};return browser.runtime.sendMessage(t)}clearDictionary(){return browser.runtime.sendMessage({command:"CLEAR_DICTIONARY"})}loadSynonyms(e,t,n){const s={command:"LOAD_SYNONYMS",wordContext:e,language:t,motherLanguage:n};return browser.runtime.sendMessage(s)}loadPhrases(e,t,n,s){const i={command:"LOAD_PHRASES",uuid:e,phrase:t,language:n,inhouseOnly:s};return browser.runtime.sendMessage(i)}reportPhrase(e,t){const n={command:"REPORT_PHRASE",uuid:e,report:t};return browser.runtime.sendMessage(n)}trackEvent(e,t){const n={command:"TRACK_EVENT",action:e,label:t};return browser.runtime.sendMessage(n)}trackTextLength(e){const t={command:"TRACK_TEXT_LENGTH",textLength:e};return browser.runtime.sendMessage(t)}pageLoaded(e,t,n,s,i){const o={command:"PAGE_LOADED",enabled:e,capitalization:t,supported:n,beta:s,unsupportedMessage:i};return browser.runtime.sendMessage(o)}ltAssistantStatusChanged(e,t){const n="object"==typeof e?e:t,s={command:"LTASSISTANT_STATUS_CHANGED",tabId:"number"==typeof e?e:void 0,enabled:n.enabled,capitalization:n.capitalization};return browser.runtime.sendMessage(s)}check(e,t,n,s,i,o){const r={command:"CHECK_TEXT",text:t,changedParagraphs:n,language:e.language,forceLanguage:e.forceLanguage,hasUserChangedLanguage:o,metaData:s,options:i};return browser.runtime.sendMessage(r)}isOptionsPageSupported(){return!0}openOptionsPage(e,t){const n={command:"OPEN_OPTIONS",target:e,ref:t};return browser.runtime.sendMessage(n)}isFeedbackFormSupported(){return!0}openFeedbackForm(e,t="",n=""){const s={command:"OPEN_FEEDBACK_FORM",url:e,title:t,html:n};return browser.runtime.sendMessage(s)}openPremiumPage(e,t=0,n=0,s=0,i="",o){const r={command:"OPEN_PREMIUM_PAGE",campaign:e,hiddenGrammarMatches:t,hiddenStyleMatches:n,hiddenPunctuationMatches:s,historicMatches:i,textLanguage:o||void 0};return browser.runtime.sendMessage(r)}}),A.init(),function(e){const t=(window.chrome||window.browser).runtime;(t.getManifest().content_scripts||[]).forEach((n=>{n.css&&n.css.forEach((n=>{const s=e.createElement("link");s.rel="stylesheet",s.href=t.getURL(n),e.head.appendChild(s)}))}))}(document),A.trackPageView();const D=C.create(),U=new URL(location.href),L=document.getElementById("feedback-form"),P=document.getElementById("headline"),O=document.getElementById("feedback-form-direct-email"),v=document.getElementById("sender"),M=document.getElementById("text"),k=document.getElementById("success-message"),G=document.getElementById("screenshot-label"),F=document.getElementById("screenshot");var x;x=document.documentElement,Array.from(x.querySelectorAll("[data-t]")).forEach((e=>{R(e,e.getAttribute("data-t"))})),Array.from(x.querySelectorAll("[data-t-placeholder]")).forEach((e=>{R(e,{key:e.getAttribute("data-t-placeholder"),attr:"placeholder"})})),Array.from(x.querySelectorAll("[data-t-html]")).forEach((e=>{R(e,{key:e.getAttribute("data-t-html"),isHTML:!0})})),Array.from(x.querySelectorAll("[data-t-title]")).forEach((e=>{R(e,{key:e.getAttribute("data-t-title"),attr:"title"})})),Array.from(x.querySelectorAll("[data-t-attr]")).forEach((e=>{const[t,n]=(e=>{const t=String(e.getAttribute("data-t-attr"));try{const e=JSON.parse(t);if((e=>Array.isArray(e)&&"string"==typeof e[0]&&"string"==typeof e[1]&&2===e.length)(e))return e;throw Error()}catch(e){return["",""]}})(e);t&&n&&R(e,{key:n,attr:t})})),U.searchParams.get("title")&&(P.textContent=U.searchParams.get("title")),"1"===U.searchParams.get("screenshot")&&(G.style.display="block",F.checked=!0,O.style.display="none");const B=U.searchParams.get("html"),H=U.searchParams.get("url")||"",$=E(H),V=t.getVersion(),z=`Feedback LanguageTool on ${$} (v${V}, lang: ${navigator.language}, browser: ${e.getBrowserName()})`,K=`<a href="mailto:feedback@languagetool.org?subject=${encodeURIComponent(z)}">feedback@languagetool.org</a>`,{runtime:Y}=window.chrome||window.browser;(Y.getManifest().content_scripts||[]).forEach((e=>{e.js&&e.all_frames&&e.js.forEach((e=>{const t=document.createElement("script");t.src=Y.getURL(e),document.write(t.outerHTML)})),e.css&&e.css.forEach((e=>{const t=document.createElement("link");t.rel="stylesheet",t.href=Y.getURL(e),document.head.appendChild(t)}))})),O.innerHTML=s.getMessage("feedbackDirectMail",[K]),D.onReady((()=>{const{username:e}=D.getSettings();e&&(v.value=e,M.focus())})),L.addEventListener("submit",(e=>{e.preventDefault();const t=v.value;A.trackEvent("Action","send_feedback",t),D.onReady((()=>{const{firstVisit:e,ratingValue:n,sessionCount:i}=D.getStatistics(),{hasPaidSubscription:o}=D.getUIState(),{geoIpLanguages:r,preferredLanguages:a,knownEmail:c,username:d,geoIpCountry:l,ignoredRules:g,hasSynonymsEnabled:u,apiServerUrl:h,hasPickyModeEnabledGlobally:m}=D.getSettings(),_=g.filter((e=>!f.getDefaultSettings().ignoredRules.find((t=>t.id===e.id))));let E=`From: ${v.value}\n`;E+=`Paying: ${o}\n`,E+=`Account: ${d||"none"}\n`,E+=`Other known email: ${c||d}\n`,E+=`Addon Version: ${V}\n`,E+=`Accept-Languages: ${navigator.languages.join(", ")}\n`,E+=`UI-Language: ${browser.i18n.getUILanguage()}\n`,E+=`GeoIP-Languages: ${r.join(", ")}\n`,E+=`Preferred-Languages: ${a.join(", ")}\n`,E+=`Country: ${l}\n`,E+=`Picky: ${m}\n`,E+=`Full URL: ${H}\n`,E+=`HTML: ${B||""}\n`,E+=`Matomo: ${D.getUniqueId()}\n`,E+=`User Agent: ${navigator.userAgent}\n`,E+=`CPU Cores: ${navigator.hardwareConcurrency}\n`,E+=`User since: ${new Date(1e3*(e||0)).toUTCString()}\n`,E+=`Rating: ${n}\n`,E+=`Synonyms: ${u}\n`,E+=`Sessions: ${i}\n`,E+=`API: ${D.getCustomServerUrl()||h}\n`,E+=`DNT: ${navigator.doNotTrack}\n`,E+=`Downlink: ${navigator.connection&&navigator.connection.downlink}\n`,E+=`Connection Type: ${navigator.connection&&navigator.connection.effectiveType}\n`,E+=`Ignored Rules: ${_.map((e=>e.id)).join(",")}\n`;const p=`${M.value}\n\n\n${E}`;D.updateSettings({knownEmail:t});const S={command:"SEND_FEEDBACK",sender:v.value,text:p,includeScreenshot:F.checked};browser.runtime.sendMessage(S).then((()=>{L.style.display="none",k.style.display="block"})).catch((()=>{A.trackError("message","error_send_feedback"),alert(s.getMessage("feedbackError"))}))}))}))})();